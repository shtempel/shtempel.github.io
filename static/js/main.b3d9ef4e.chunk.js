(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){},103:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),i=n(45),o=n.n(i),s=n(12),u=n(11),l=n(21),m=n(20),v=n(13),f=n(30),d=n(3),_=Object(d.createAction)("SET_SEARCH_BY",function(e){return function(t){return e(t)}}),p="https://react-cdp-api.herokuapp.com/movies";!function(e){e.MainTitle="netflixroulette",e.Search="search",e.SearchBy="search by",e.SortBy="Sort by",e.FindYourMovie="find your movie",e.Title="title",e.Genres="genres",e.ReleaseDate="release date",e.Rating="rating",e.MoviesFound=" movies found",e.ResultsOnPage="Show results on page: "}(a||(a={}));var b,O=a.Title,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(d.getType)(_):return t.payload;default:return e}},h=Object(d.createAction)("SET_SORT_BY",function(e){return function(t){return e(t)}});!function(e){e.Date="date",e.Rating="rating"}(b||(b={}));var E,j=b.Date,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(d.getType)(h):return t.payload;default:return e}},T=n(23),M=Object(d.createAction)("SET_QUERY_STRING",function(e){return function(t){return e(t)}}),S=Object(d.createAction)("SET_CURRENT_MOVIE_ID",function(e){return function(t){return e(t)}}),N=Object(d.createAction)("FETCH_MOVIES"),w=Object(d.createAction)("FETCH_MOVIES_SUCCESS",function(e){return function(t){return e(t)}}),I=Object(d.createAction)("FETCH_MOVIES_FAIL",function(e){return function(t){return e(t)}}),x=Object(d.createAction)("FETCH_MOVIE_BY_ID "),k=Object(d.createAction)("FETCH_MOVIE_BY_ID_SUCCESS",function(e){return function(t){return e(t)}}),A=Object(d.createAction)("FETCH_MOVIE_BY_ID_FAIL",function(e){return function(t){return e(t)}}),C=Object(d.createAction)("SORT_BY_RATING"),F=Object(d.createAction)("SORT_BY_DATE"),B=Object(d.createAction)("FETCH_FAVORITE_MOVIE"),R=Object(d.createAction)("FETCH_FAVORITE_MOVIE_SUCCESS",function(e){return function(t){return e(t)}}),L=Object(d.createAction)("FETCH_FAVORITE_MOVIE_FAIL",function(e){return function(t){return e(t)}}),D=Object(d.createAction)("REMOVE_MOVIE_FROM_FAVORITES",function(e){return function(t){return e(t)}}),V=Object(d.createAction)("REHYDRATE_STATE"),P=Object(d.createAction)("REHYDRATE_STATE_DONE"),H=Object(d.createAction)("RESTORE_SAVED_STATE",function(e){return function(t){return e(t)}}),Y={isFavoriteLoading:!1,isLoading:!1,currentMovieId:"",queryString:"",movies:[],favMovies:[],currentMovie:{}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(d.getType)(H):var n=t.payload,a=n.movies,r=n.currentMovie,c=n.favMovies;return Object(u.a)({},e,{movies:a||[],currentMovie:r||{},favMovies:c||[]});case Object(d.getType)(M):return Object(u.a)({},e,{queryString:t.payload});case Object(d.getType)(R):return Object(u.a)({},e,{favMovies:Object(T.a)(e.favMovies).concat([t.payload]),isFavoriteLoading:!1});case Object(d.getType)(D):return Object(u.a)({},e,{favMovies:Object(T.a)(e.favMovies.filter(function(e){return e.id!==parseInt(t.payload)}))});case Object(d.getType)(S):return Object(u.a)({},e,{currentMovieId:t.payload});case Object(d.getType)(B):return Object(u.a)({},e,{isFavoriteLoading:!0});case Object(d.getType)(N):case Object(d.getType)(x):return Object(u.a)({},e,{isLoading:!0});case Object(d.getType)(w):return Object(u.a)({},e,{isLoading:!1,movies:t.payload});case Object(d.getType)(L):return Object(u.a)({},e,{isFavoriteLoading:!1});case Object(d.getType)(A):case Object(d.getType)(I):return Object(u.a)({},e,{isLoading:!1});case Object(d.getType)(k):return Object(u.a)({},e,{currentMovie:t.payload,isLoading:!1});case Object(d.getType)(C):return Object(u.a)({},e,{movies:e.movies.sort(function(e,t){return e.voteAverage-t.voteAverage})});case Object(d.getType)(F):return Object(u.a)({},e,{movies:e.movies.sort(function(e,t){return parseInt(t.releaseDate)-parseInt(e.releaseDate)})});default:return e}},U=Object(d.createAction)("SET_SEARCH_LIMIT",function(e){return function(t){return e(t)}}),J=n(14),Q=n.n(J),q=n(10),X=Object(q.a)(function(e){return e},function(e){return e.searchLimit});n(66);!function(e){e.ten="10",e.twenty="20",e.thirty="30"}(E||(E={}));var K={setSearchLimit:U,fetchMovies:N},z=Object(s.connect)(function(e){return{searchLimit:X(e)}},K)(function(e){var t=function(t){var n=e.setSearchLimit,a=e.fetchMovies;e.searchLimit!==t.target.id&&n(t.target.id)&&a()},n=function(n){var a=e.searchLimit;return c.a.createElement("span",{id:n,onClick:t,className:Q()("single-control",{"single-control-active":a===n})},n)};return c.a.createElement("div",{className:"results-amount-controller"},c.a.createElement("span",null,a.ResultsOnPage),n(E.ten),n(E.twenty),n(E.thirty))}),W=E.ten,Z={moviesState:G,sortBy:y,searchBy:g,searchLimit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(d.getType)(U):return t.payload;default:return e}}},$=n(6),ee=n.n($),te=n(5),ne=Object(q.a)(function(e){return e},function(e){return e.searchBy}),ae=function(e){return e.moviesState},re=Object(q.a)([ae],function(e){return e.movies}),ce=Object(q.a)([ae],function(e){return e.isLoading}),ie=Object(q.a)([ae],function(e){return e.currentMovie}),oe=Object(q.a)([re],function(e){return e.length}),se=Object(q.a)([ae],function(e){return e.queryString}),ue=Object(q.a)([ae],function(e){return e.currentMovieId}),le=Object(q.a)([ae],function(e){return e.favMovies}),me=n(28),ve=n(29),fe=new(function(){function e(t){Object(me.a)(this,e),this.localStorage=t}return Object(ve.a)(e,[{key:"setItem",value:function(e,t){this.localStorage.setItem(e,JSON.stringify(t))}},{key:"getItem",value:function(e){var t=this.localStorage.getItem(e);return t?JSON.parse(t):null}}]),e}())(window.localStorage),de=n(37),_e=n.n(de),pe=new(function(){function e(){Object(me.a)(this,e)}return Object(ve.a)(e,[{key:"getMovies",value:function(e,t,n){return _e.a.get("".concat(p,"?search=").concat(e,"&searchBy=").concat(t,"&limit=").concat(n)).then(function(e){return e.data.data.map(function(e){return{title:e.title,id:e.id,posterPath:e.poster_path,releaseDate:e.release_date,genres:e.genres,voteAverage:e.vote_average}})})}},{key:"getMovieById",value:function(e){return _e.a.get("".concat(p,"/").concat(e)).then(function(e){return e.data={title:e.data.title,id:e.data.id,posterPath:e.data.poster_path,releaseDate:e.data.release_date,genres:e.data.genres,voteAverage:e.data.vote_average,tagLine:e.data.tagline,runtime:e.data.runtime,overview:e.data.overview}})}}]),e}()),be=ee.a.mark(ye),Oe=ee.a.mark(Te),ge=ee.a.mark(Me),he=ee.a.mark(Se),Ee=ee.a.mark(Ne),je=ee.a.mark(we);function ye(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.g)(1e3,Object(d.getType)(N),Te);case 2:case"end":return e.stop()}},be,this)}function Te(){var e,t,n,a;return ee.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(te.b)(f.b,1e3);case 2:return r.prev=2,r.next=5,Object(te.d)(se);case 5:return e=r.sent,r.next=8,Object(te.d)(ne);case 8:return t=r.sent,r.next=11,Object(te.d)(X);case 11:return n=r.sent,r.next=14,Object(te.b)([pe,pe.getMovies],e,t,n);case 14:return a=r.sent,r.next=17,Object(te.c)(w(a));case 17:r.next=23;break;case 19:return r.prev=19,r.t0=r.catch(2),r.next=23,Object(te.c)(I(r.t0));case 23:case"end":return r.stop()}},Oe,this,[[2,19]])}function Me(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.g)(1e3,Object(d.getType)(x),Se);case 2:case"end":return e.stop()}},ge,this)}function Se(){var e,t;return ee.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(te.d)(ue);case 3:return e=n.sent,n.next=6,Object(te.b)([pe,pe.getMovieById],e);case 6:return t=n.sent,n.next=9,Object(te.c)(k(t));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(te.c)(A(n.t0));case 15:case"end":return n.stop()}},he,this,[[0,11]])}function Ne(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.g)(1e3,Object(d.getType)(B),we);case 2:case"end":return e.stop()}},Ee,this)}function we(){var e,t;return ee.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(te.d)(ue);case 3:return e=n.sent,n.next=6,Object(te.b)([pe,pe.getMovieById],e);case 6:return t=n.sent,n.next=9,Object(te.c)(R(t));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(te.c)(L(n.t0));case 15:case"end":return n.stop()}},je,this,[[0,11]])}var Ie=[ye(),Me(),Ne()],xe=Object(q.a)([function(e){return e.router}],function(e){return e.location.pathname}),ke=Object(q.a)(xe,function(e){return{location:{pathname:e}}}),Ae=Object(q.a)([ke,ie,re,le],function(e,t,n,a){return{router:e,currentMovie:t,movies:n,favMovies:a}}),Ce=ee.a.mark(Pe),Fe=ee.a.mark(He),Be=ee.a.mark(Ge),Re=ee.a.mark(Ue),Le=[m.LOCATION_CHANGE,Object(d.getType)(k),Object(d.getType)(R),Object(d.getType)(D),Object(d.getType)(N)],De=500,Ve="MOVIES_state";function Pe(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.f)(Object(d.getType)(V),He);case 2:case"end":return e.stop()}},Ce,this)}function He(){var e;return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.b)(Ye);case 2:if(!(e=t.sent)){t.next=9;break}if(!e.router){t.next=7;break}return t.next=7,Object(te.c)(Object(m.push)(e.router.location.pathname));case 7:return t.next=9,Object(te.c)(H(e));case 9:return t.next=11,Object(te.c)(P());case 11:case"end":return t.stop()}},Fe,this)}var Ye=function(){return fe.getItem(Ve)};function Ge(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.g)(De,Le,Ue);case 2:case"end":return e.stop()}},Be,this)}function Ue(){var e;return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.d)(Ae);case 2:return e=t.sent,t.next=5,Object(te.b)([fe,fe.setItem],Ve,e);case 5:case"end":return t.stop()}},Re,this)}var Je=[Ge(),Pe()],Qe=Object(d.createAction)("INIT"),qe=ee.a.mark(ze),Xe=ee.a.mark(We),Ke=ee.a.mark(Ze);function ze(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)(Object(d.getType)(Qe));case 2:return e.next=4,Object(te.c)(V());case 4:case"end":return e.stop()}},qe,this)}function We(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)(Object(d.getType)(P));case 2:case"end":return e.stop()}},Xe,this)}function Ze(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)(Object(T.a)(Ie).concat(Object(T.a)(Je),[ze(),We()]));case 2:case"end":return e.stop()}},Ke,this)}var $e,et=Object(v.a)(),tt=Object(f.a)(),nt=[tt,Object(m.routerMiddleware)(et)],at=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,rt=Object(l.e)(($e=et,Object(l.c)(Object(u.a)({},Z,{router:Object(m.connectRouter)($e)}))),at(l.a.apply(void 0,nt)));tt.run(Ze);var ct=n(48),it=(n(89),{fetchMovies:N,setSearchBy:_,setQueryString:M}),ot=Object(s.connect)(function(e){return{searchBy:e.searchBy,favorites:le(e),isLoading:e.moviesState.isLoading,moviesCount:oe(e)}},it)(function(e){var t=e.setQueryString,n=e.fetchMovies,i=e.isLoading,o=e.setSearchBy,s=Object(r.useState)(""),u=Object(ct.a)(s,2),l=u[0],m=u[1],v=function(){et.push("/search/:".concat(l)),t(l),n()},f=function(e){o(e.target.value)},d=function(t){return t===e.searchBy};return c.a.createElement("div",{className:"header column"},c.a.createElement(vt,{className:"header__title",title:a.MainTitle}),c.a.createElement("span",{className:"header__find_your"},a.FindYourMovie),c.a.createElement("input",{className:"header__search-input",type:"search",onKeyPress:function(e){"Enter"===e.key&&v()},value:l,onChange:function(e){m(e.target.value)}}),c.a.createElement("div",{className:"header__controls row"},c.a.createElement("div",{className:"header__controls__left"},c.a.createElement("span",null,a.SearchBy),c.a.createElement(ut,{value:a.Title,onClick:f,type:"button",disabled:d(a.Title),className:Q()("btn",{"active-button":d(a.Title)}),name:a.Title}),c.a.createElement(ut,{value:a.Genres,onClick:f,type:"button",disabled:d(a.Genres),className:Q()("btn",{"active-button":d(a.Genres)}),name:a.Genres})),c.a.createElement(ut,{className:"header__controls__search-button btn",onClick:v,disabled:i,type:"submit",name:a.Search})))}),st=(n(91),function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("span",null,a.MainTitle))}),ut=function(e){return c.a.createElement("button",e,e.name)},lt=(n(93),{setSortBy:h,sortByRating:C,sortByDate:F}),mt=Object(s.connect)(function(e){return{moviesCount:oe(e),sortBy:e.sortBy}},lt)(function(e){var t=e.moviesCount,n=e.setSortBy,r=e.sortByDate,i=e.sortByRating,o=function(e){"rating"===e.target.id?i():r(),n(e.target.id)},s=function(t){return t===e.sortBy};return c.a.createElement("div",{className:"sort-by row"},c.a.createElement("span",null,t,a.MoviesFound),c.a.createElement("div",{className:"row sort-by__buttons"},c.a.createElement("span",null,a.SortBy),c.a.createElement("span",{id:"date",className:Q()("link",{"active-link":s(b.Date)}),onClick:o},a.ReleaseDate),c.a.createElement("span",{id:"rating",className:Q()("link",{"active-link":s(b.Rating)}),onClick:o},a.Rating)))}),vt=function(e){return c.a.createElement("span",e,e.title)},ft=(n(95),function(){return c.a.createElement("div",{className:"loading-div"},c.a.createElement("p",{className:"loading"}))}),dt=function(e){return c.a.createElement("i",{className:"".concat(e.className,"  ").concat(e.iconPrefix," fa-").concat(e.icon),title:e.title,id:e.id,onClick:e.onIconClick})},_t=n(109),pt=function(e){var t=e.favorites.some(function(t){return t.id===e.movie.id}),n=t?"fas":"far";return c.a.createElement("div",{className:"search-result__movie-card column"},c.a.createElement(_t.a,{to:"/movie/".concat(e.movie.id)},c.a.createElement("img",{className:"search-result__movie-card__poster",id:e.movie.id.toString(),src:e.movie.posterPath,alt:e.movie.title,onClick:e.onPosterClick})),c.a.createElement("div",{className:"search-result__movie-card__header row"},c.a.createElement("span",{className:"search-result__movie-card__title"},e.movie.title),c.a.createElement("span",{className:"search-result__movie-card__date"},e.movie.releaseDate.slice(0,4))),c.a.createElement("div",{className:"search-result__movie-card__header row"},c.a.createElement("span",{className:"search-result__movie-card__genres"},e.movie.genres.join(" & ")),c.a.createElement(dt,{className:Q()("search-result__movie-card__favorite",{fav:t}),id:e.movie.id.toString(),iconPrefix:n,icon:"star",onIconClick:e.onStarClick})))},bt=(n(97),{fetchMovieById:x,setCurrentMovieId:S,fetchFavoriteMovie:B,removeMovieFromFavorites:D}),Ot=Object(s.connect)(function(e){return{favorites:le(e)}},bt)(function(e){var t=e.setCurrentMovieId,n=e.fetchMovieById,a=e.movies,r=e.favorites,i=e.removeMovieFromFavorites,o=e.fetchFavoriteMovie,s=function(e){t(e.target.id),n()},u=function(e){var n=e.target.id,a=r.some(function(e){return e.id===parseInt(n,10)});t(e.target.id),a?i(n):o()};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-result-wrapper row"},c.a.createElement("div",{className:"search-result row"}," ",a.map(function(e){return c.a.createElement(pt,{key:e.id,movie:e,onPosterClick:s,onStarClick:u,favorites:r})})),c.a.createElement(gt,{fetchFavoriteMovie:s,favorites:r})),c.a.createElement(z,null))}),gt=(n(99),function(e){return c.a.createElement("div",{className:"favorites"},e.favorites&&e.favorites.map(function(t){return c.a.createElement("div",{key:t.id,className:"favorites__item"},c.a.createElement(_t.a,{to:"/movie/".concat(t.id)},c.a.createElement("img",{className:"favorites__item__poster",id:t.id.toString(),src:t.posterPath,alt:t.title,onClick:e.fetchFavoriteMovie})))}))}),ht=n(34),Et=n(25),jt={fetchMovies:N},yt=Object(s.connect)(function(e){return{movies:re(e),isLoading:ce(e)}},jt)(function(e){var t=e.fetchMovies,n=e.movies,a=e.isLoading;Object(r.useEffect)(function(){t()},[!n]);var i=n.length?c.a.createElement(Ot,{movies:n}):c.a.createElement("div",{className:"no-films-found"},c.a.createElement("h1",null," No films found")),o=a?c.a.createElement(ft,null):i;return c.a.createElement("div",null,c.a.createElement(ot,null),c.a.createElement(mt,null),o)}),Tt=(n(101),{fetchFavoriteMovieSuccess:R,removeMovieFromFavorites:D}),Mt=Object(s.connect)(function(e){return{currentMovie:ie(e),movies:re(e),favorites:le(e),isLoading:ce(e)}},Tt)(function(e){var t=e.currentMovie,n=t.posterPath,r=t.title,i=t.voteAverage,o=t.tagLine,s=t.releaseDate,u=t.runtime,l=t.overview,m=t.id,v=e.movies,f=e.isLoading,d=e.favorites,_=e.fetchFavoriteMovieSuccess,p=e.removeMovieFromFavorites,b=d.some(function(t){return t.id===e.currentMovie.id}),O=b?"fas":"far",g=function(e){return Number.isInteger(e)},h=f?c.a.createElement(ft,null):c.a.createElement(Ot,{movies:v});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"detailed-info column"},c.a.createElement("div",{className:"detailed-info__top row"},c.a.createElement(vt,{className:"detailed-info__top__title",title:a.MainTitle}),c.a.createElement(ut,{type:"button",name:a.Search,className:"btn detailed-info__top__to-search",onClick:function(){et.push("/")}})),c.a.createElement("div",{className:"detailed-info__film row"},c.a.createElement("img",{className:"detailed-info__film__poster",src:n,alt:r}),c.a.createElement("div",{className:"detailed-info__film__right column"},c.a.createElement("div",{className:"detailed-info__film__right__title-rating row"},c.a.createElement("span",{className:"detailed-info__film__right__title-rating__title"},r),c.a.createElement(dt,{className:Q()("search-result__movie-card__favorite",{fav:b}),id:m.toString(),iconPrefix:O,icon:"star",onIconClick:function(){d.some(function(e){return e.id===m})?p(m.toString()):_(e.currentMovie)}}),c.a.createElement("span",{className:Q()("detailed-info__film__right__title-rating__rating",{"integer-border ":g(i),"fractional-border":!g(i)})},i)),c.a.createElement("span",{className:"detailed-info__film__right__tagline"},o),c.a.createElement("div",{className:"detailed-info__film__right__date-runtime row"},c.a.createElement("span",{className:"detailed-info__film__right__date-runtime__date"},s&&s.slice(0,4)),c.a.createElement("span",{className:"detailed-info__film__right__date-runtime__runtime"},u," min")),c.a.createElement("span",{className:"detailed-info__film__right__overview"},l)))),h)}),St=c.a.createElement("div",null,c.a.createElement(ht.a,null,c.a.createElement(Et.a,{exact:!0,path:"/",component:yt}),c.a.createElement(Et.a,{path:"/search/:searchQuery",component:yt}),c.a.createElement(Et.a,{path:"/movie/:id",component:Mt}))),Nt=(n(103),function(){return c.a.createElement("div",{className:"app"},c.a.createElement(m.ConnectedRouter,{history:et},St),c.a.createElement(st,null))});n(105);rt.dispatch(Qe()),o.a.render(c.a.createElement(s.Provider,{store:rt},c.a.createElement(Nt,null)),document.getElementById("root"))},50:function(e,t,n){e.exports=n(107)},66:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){}},[[50,2,1]]]);
//# sourceMappingURL=main.b3d9ef4e.chunk.js.map